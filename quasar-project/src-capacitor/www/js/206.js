"use strict";(self["webpackChunkquasar_project"]=self["webpackChunkquasar_project"]||[]).push([[206],{208:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(9981),n=o.n(a),i=o(4663);function s(e){const t=new FormData;let o="";return Object.keys(e).forEach((function(a){o=e[a],t.append(a,o)})),t}o(4006);const l="https://request-dbgkulzmmq-uw.a.run.app";function r(e,t,o,a,r,u=!0){var c=i.store.getters["auth/authGetter"],m=null,d={};e&&"data"in e&&("GET"===o?d=e.data:(console.log(e.data),m=s(e.data)));const g=`${l}${a}`;return new Promise(((e,a)=>{n()({method:o,url:g,headers:{...u&&{Authorization:`JWT ${c}`},"Content-Type":"multipart/form-data"},data:m,params:d,withCredentials:!0}).then((o=>{e(o),t&&r&&t.commit(r,o.data)})).catch((e=>{a(e)}))}))}},3550:(e,t,o)=>{o.d(t,{Z:()=>s});var a=o(208);function n(e,t){const o="/api/maintenance_portal/report_issue/request/",n=o,i="mutationEntityList";return(0,a.Z)(e,t,"POST",n,i,!0)}function i(e,t){const o="/api/maintenance_portal/issues/",n=o,i="";return(0,a.Z)(e,t,"GET",n,i,!0)}const s={postIssue:n,getIssues:i}},8206:(e,t,o)=>{o.r(t),o.d(t,{default:()=>N});var a=o(9835);const n=e=>((0,a.dD)("data-v-87aeb18e"),e=e(),(0,a.Cn)(),e),i={class:"row",style:{}},s=n((()=>(0,a._)("h6",null,"Report A Problem",-1))),l={class:"row rowc__what flex-center cus_row",style:{}},r={class:"column",style:{width:"100vw"}},u={class:"col"},c=n((()=>(0,a._)("div",{style:{"margin-left":"4%"},class:"text-grey-8"},"TEXT TEST",-1))),m={class:"row rowc__description cus_row"},d={class:"col flex"},g={class:"relative-position row rowc__image"},p={class:"col justify-center items-center",style:{"margin-top":"10px"}},h={class:"relative-position"};function w(e,t,o,n,w,y){const b=(0,a.up)("q-btn"),f=(0,a.up)("q-icon"),k=(0,a.up)("q-input"),v=(0,a.up)("image-carousel2"),_=(0,a.up)("q-page-sticky"),C=(0,a.up)("q-page"),x=(0,a.up)("q-page-container"),q=(0,a.up)("q-layout"),P=(0,a.up)("bottom-menu");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(q,{fullscreen:"",view:"hHh LpR fFf",style:{},class:""},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{class:"relative-position"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"q-px-md text-body2"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(b,{onClick:y.backToIssues,size:"25px",padding:"sm",unelevated:"",round:"",icon:"close"},null,8,["onClick"]),s]),(0,a._)("div",l,[(0,a._)("div",r,[(0,a._)("div",u,[(0,a._)("div",{onClick:t[0]||(t[0]=t=>y.bottomMenuToggle(e.categoryOptions)),style:{width:"100%",height:"60px"},class:"flex justify-between content-center border-radius-inherit border"},[c,(0,a.Wm)(f,{color:"grey-7",name:"arrow_drop_down",size:"sm",style:{"margin-right":"4%"}})])])])]),(0,a._)("div",m,[(0,a._)("div",d,[(0,a.Wm)(k,{outlined:"",modelValue:e.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.description=t),label:"Describe Problem",type:"textarea",style:{height:"100%",width:"100%"},class:"input_description"},null,8,["modelValue"])])]),(0,a._)("div",g,[(0,a.Wm)(b,{class:"image__more absolute-top-right",size:"large",style:{"z-index":"105"},flat:"",round:"",color:"black",icon:"more_horiz",onClick:t[2]||(t[2]=t=>y.bottomMenuToggle(e.imageMenuList))}),(0,a._)("div",p,[(0,a._)("div",h,[y.noOfImg?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(b,{key:0,class:"btn-fixed-width absolute-center",align:"left",style:{"z-index":"100"},onClick:y.takePicture,label:"Add Photo",color:"grey",icon:"camera"},null,8,["onClick"])),y.noOfImg?((0,a.wg)(),(0,a.j4)(b,{key:1,class:"absolute-bottom-right glossy",style:{"z-index":"100"},onClick:y.takePicture,round:"",color:"grey",icon:"camera"},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(v,{ref:"carousal",style:{height:"40vh"},images:e.images,slide:e.slide},null,8,["images","slide"])])])]),(0,a.Wm)(_,{position:"bottom-right",style:{"z-index":"200"},offset:[15,30]},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{onClick:y.postIssue,class:"full-width",style:{"font-size":"16px"},color:"primary",label:"Submit",loading:e.submitState},null,8,["onClick","loading"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(P,{ref:"bottomMenu","show-bottom-menu":e.ShowBottomMenu},null,8,["show-bottom-menu"])],64)}var y=o(3550);function b(e,t){return new Promise(((o,a)=>{let n,i,s,l,r,u,c=e.split(","),m=c[0].match(/[^:\s*]\w+\/[\w-+\d.]+(?=[;| ])/)[0];console.log(m);const d="image/jpeg";let g=new Image;g.src=e,g.onload=e=>{n=g.width,i=g.height,s=Math.floor(i/n*t),console.log("wh",n,i),l=document.createElement("canvas"),l.width=t,l.height=s,r=l.getContext("2d"),r.drawImage(g,0,0,t,s),u=l.toDataURL(d),o(u)}}))}o(702);function f(e,t,o,n,i,s){const l=(0,a.up)("q-carousel-slide"),r=(0,a.up)("q-carousel");return(0,a.wg)(),(0,a.iD)("div",{class:"q-pa-md",onReportNextSlide:t[3]||(t[3]=(...e)=>s.increasePage&&s.increasePage(...e))},[(0,a.Wm)(r,{animated:"",modelValue:e.indexDum,"onUpdate:modelValue":t[0]||(t[0]=t=>e.indexDum=t),navigation:"",infinite:"",autoplay:e.autoplay,swipeable:"","transition-prev":"slide-right","transition-next":"slide-left",onMouseenter:t[1]||(t[1]=t=>e.autoplay=!1),onMouseleave:t[2]||(t[2]=t=>e.autoplay=!0),height:"100%"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.images,((e,t)=>((0,a.wg)(),(0,a.j4)(l,{key:t,name:t+1,"img-src":e},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue","autoplay"])],32)}const k={name:"imageCarousel2",data:()=>({autoplay:!1,indexDum:0}),props:["images","slide"],methods:{increasePage(){this.indexDum=this.indexDum+1}},created(){}};var v=o(1639),_=o(960),C=o(1694),x=o(9984),q=o.n(x);const P=(0,v.Z)(k,[["render",f]]),M=P;q()(k,"components",{QCarousel:_.Z,QCarouselSlide:C.Z});var T=o(2767),Z=o(1957),I=o(6970);const S=e=>((0,a.dD)("data-v-61c86b5a"),e=e(),(0,a.Cn)(),e),D={key:0,style:{position:"absolute",bottom:"0",width:"100%","background-color":"white","z-index":"500"},class:"showBottom"},W=S((()=>(0,a._)("div",null,null,-1)));function z(e,t,o,n,i,s){const l=(0,a.up)("q-icon"),r=(0,a.up)("q-card-section"),u=(0,a.up)("q-separator"),c=(0,a.up)("q-card"),m=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.dataShowBottomMenu?((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>s.BottomMenuToggle&&s.BottomMenuToggle(...e)),style:{position:"absolute",bottom:"0","z-index":"499",width:"100%",height:"100vh"},class:"overlay"})):(0,a.kq)("",!0),(0,a.Wm)(Z.W3,{name:"list"},{default:(0,a.w5)((()=>[e.dataShowBottomMenu?((0,a.wg)(),(0,a.iD)("div",D,[(0,a.Wm)(c,{style:{width:"100%",height:"100%","background-color":"white","margin-bottom":"5%"},class:"no-shadow"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.menuList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a.wy)(((0,a.wg)(),(0,a.j4)(r,{onClick:s.BottomMenuToggle,class:"row items-center no-wrap"},{default:(0,a.w5)((()=>[e.icon?((0,a.wg)(),(0,a.j4)(l,{key:0,style:{"margin-right":"5px"},size:"sm",name:e.icon},null,8,["name"])):(0,a.kq)("",!0),(0,a._)("div",null,(0,I.zw)(e.name),1)])),_:2},1032,["onClick"])),[[m]]),(0,a.Wm)(u)])))),128)),(0,a.Wm)(r,{class:"row items-center no-wrap"},{default:(0,a.w5)((()=>[W])),_:1})])),_:1})])):(0,a.kq)("",!0)])),_:1})],64)}const B={name:"bottomMenu",data:function(){return{dataShowBottomMenu:!1,menuList:[]}},methods:{BottomMenuToggle(e){this.dataShowBottomMenu=!this.dataShowBottomMenu,this.menuList=e}}};var Q=o(4458),j=o(3190),L=o(2857),E=o(926),A=o(1136);const O=(0,v.Z)(B,[["render",z],["__scopeId","data-v-61c86b5a"]]),R=O;q()(B,"components",{QCard:Q.Z,QCardSection:j.Z,QIcon:L.Z,QSeparator:E.Z}),q()(B,"directives",{Ripple:A.Z});const V={name:"ReportProblem",components:{BottomMenu:R,ImageCarousel2:M},data:function(){return{images:[],imageUrl:null,brokenItem:"",submittedBefore:!1,description:"",imagePackage:[],submitState:!1,url:"https://placeimg.com/500/300/nature",slide:1,cookies:null,hasCookies:!0,category:"",categoryOptions:[{name:"Plumbing"},{name:"Pool"},{name:"Electrical"},{name:"General Maintenance"},{name:"Internet"},{name:"Appliances"},{name:"Alarm"},{name:"Security"},{name:"Gate"},{name:"Other"}],ShowBottomMenu:!1,dialog:!1,maximizedToggle:!0,imageMenuList:[{name:"Delete",icon:"delete"},{name:"Add Comment",icon:"comment"},{name:"Add Photo",icon:"photo"}]}},computed:{noOfImg:function(){return!!this.images.length}},methods:{bottomMenuToggle(e){this.$refs.bottomMenu.BottomMenuToggle(e)},async takePicture(){const e=await T.V1.getPhoto({quality:90,allowEditing:!0,resultType:T.dk.Uri});var t=e.webPath;b(t,750).then((e=>{vue.imagePackage.push(e)})),vue.images.push(img),vue.$refs.carousal.increasePage()},onFileSelected(e){let t=e.target.files||e.dataTransfer.files,o=new FileReader;o.readAsDataURL(t[0]),o.onloadend=e=>{b(e.target.result,750).then((e=>{this.imagePackage.push(e)})),this.images.push(o.result),this.slide=this.images.length||1}},postIssue(){this.submitState=!0;const e={data:{item:this.brokenItem,description:this.description,property:1,status:1,pictures:this.imagePackage}};y.Z.postIssue(e).then((e=>{console.log(e),this.submitState=!1,this.backToIssues()}))},getDescription(){this.description=this.$refs.description.value},backToIssues(){this.$router.push({path:"/client/issues/"})}}};var $=o(7605),U=o(2133),G=o(9885),H=o(8879),F=o(6611),Y=o(4363),K=o(627);const J=(0,v.Z)(V,[["render",w],["__scopeId","data-v-87aeb18e"]]),N=J;q()(V,"components",{QLayout:$.Z,QPageContainer:U.Z,QPage:G.Z,QBtn:H.Z,QInput:F.Z,QSelect:Y.Z,QIcon:L.Z,QPageSticky:K.Z})}}]);