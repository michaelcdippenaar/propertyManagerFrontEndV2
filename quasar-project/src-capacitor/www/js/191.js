"use strict";(self["webpackChunkquasar_project"]=self["webpackChunkquasar_project"]||[]).push([[191],{208:(t,e,o)=>{o.d(e,{Z:()=>i});var a=o(9981),n=o.n(a),l=o(3367);function s(t){const e=new FormData;let o="";return Object.keys(t).forEach((function(a){o=t[a],e.append(a,o)})),e}o(4006);const r="https://request-dbgkulzmmq-uw.a.run.app";function i(t,e,o,a,i,c=!0){var u=l.store.getters["auth/authGetter"],d=null,p={};t&&"data"in t&&("GET"===o?p=t.data:(console.log(t.data),d=s(t.data)));const m=`${r}${a}`;return new Promise(((t,a)=>{n()({method:o,url:m,headers:{...c&&{Authorization:`JWT ${u}`},"Content-Type":"multipart/form-data"},data:d,params:p,withCredentials:!0}).then((o=>{t(o),e&&i&&e.commit(i,o.data)})).catch((t=>{a(t)}))}))}},2191:(t,e,o)=>{o.r(e),o.d(e,{default:()=>j});var a=o(9835);const n=t=>((0,a.dD)("data-v-3cbf58ff"),t=t(),(0,a.Cn)(),t),l={class:"column"},s=n((()=>(0,a._)("div",{class:"row flex flex-center"},[(0,a._)("h5",{class:"text-h5 text-white q-my-md"},"Property Manager")],-1))),r={class:"row"},i=n((()=>(0,a._)("p",{class:"text-grey-6"},"TEST Not registered? Created an Account",-1)));function c(t,e,o,n,c,u){const d=(0,a.up)("q-input"),p=(0,a.up)("q-form"),m=(0,a.up)("q-card-section"),f=(0,a.up)("q-btn"),w=(0,a.up)("q-card-actions"),h=(0,a.up)("q-card"),g=(0,a.up)("q-page"),q=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.j4)(q,{view:"lHh Lpr lFf"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"page window-height window-width row justify-center items-center"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[s,(0,a._)("div",r,[(0,a.Wm)(h,{square:"",bordered:"",class:"q-pa-lg shadow-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{square:"",filled:"",clearable:"",modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=e=>t.email=e),type:"email",label:"email"},null,8,["modelValue"]),(0,a.Wm)(d,{square:"",filled:"",clearable:"",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=e=>t.password=e),type:"password",label:"password"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(w,{class:"q-px-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{loading:t.loading,onClick:u.loginUser,unelevated:"",color:"primary",size:"lg",class:"full-width",label:"Login"},null,8,["loading","onClick"])])),_:1}),(0,a.Wm)(m,{class:"text-center q-pa-none"},{default:(0,a.w5)((()=>[i])),_:1})])),_:1})])])])),_:1})])),_:1})}var u=o(208);function d(t,e){const o="/api/auth/login/";let a=(0,u.Z)(t,e,"POST",o,"",!1);return a}function p(t,e){const o="/accounts/google/login/";let a=(0,u.Z)(t,e,"POST",o);return a}const m={postDetail:d,postDetailGoogle:p};function f(t,e){return new Promise(((o,a)=>{const n=JSON.stringify(t),l=new Blob([n],{type:"application/json"});window.requestFileSystem(localFileSystem.PERSISTENT,0,(function(t){t.root.getFile(e,{create:!0,exclusive:!1},(function(t){t.createWriter((function(e){console.log(t),e.onwriteend=function(){console.log("Successful file write...")},e.onerror=function(t){console.log("Failed file write: "+t.toString())},o(e.write(l))}))}))}))}))}function w(t,e){const o=cordova.file.applicationStorageDirectory.concat("Documents/",t);return new Promise(((t,e)=>{window.resolveLocalFileSystemURL(o,(function(e){t(!0)}),(function(t){e(!1)}))}))}const h={name:"LoginPage",computed:{},data:function(){return{email:"",password:"",loading:!1}},methods:{getAuthFromFile(){const t=w("token.json");t.then((t=>{const e=this.$store.dispatch("auth/jwtFromCache");e.then((()=>{this.$router.push({path:"/client/issues/"})}))}))},loginUser:async function(){const t={data:{email:this.email,password:this.password}};this.loading=!0,m.postDetail(t).then((t=>{this.$store.commit("auth/jwtMutation",t.data.token.token);const e={token:t.data.token.token};f(e,"token.json"),this.$router.push({path:"/client/issues/"}),this.loading=!1}))}}};var g=o(1639),q=o(7605),y=o(9885),_=o(4458),k=o(3190),v=o(8326),b=o(6611),S=o(1821),C=o(8879),Z=o(9984),F=o.n(Z);const W=(0,g.Z)(h,[["render",c],["__scopeId","data-v-3cbf58ff"]]),j=W;F()(h,"components",{QLayout:q.Z,QPage:y.Z,QCard:_.Z,QCardSection:k.Z,QForm:v.Z,QInput:b.Z,QCardActions:S.Z,QBtn:C.Z})}}]);