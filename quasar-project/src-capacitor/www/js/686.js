"use strict";(self["webpackChunkquasar_project"]=self["webpackChunkquasar_project"]||[]).push([[686],{208:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(9981),n=o.n(a),i=o(3367);function s(e){const t=new FormData;let o="";return Object.keys(e).forEach((function(a){o=e[a],t.append(a,o)})),t}o(4006);const l="https://request-dbgkulzmmq-uw.a.run.app";function r(e,t,o,a,r,c=!0){var u=i.store.getters["auth/authGetter"],m=null,d={};e&&"data"in e&&("GET"===o?d=e.data:(console.log(e.data),m=s(e.data)));const p=`${l}${a}`;return new Promise(((e,a)=>{n()({method:o,url:p,headers:{...c&&{Authorization:`JWT ${u}`},"Content-Type":"multipart/form-data"},data:m,params:d,withCredentials:!0}).then((o=>{e(o),t&&r&&t.commit(r,o.data)})).catch((e=>{a(e)}))}))}},3550:(e,t,o)=>{o.d(t,{Z:()=>s});var a=o(208);function n(e,t){const o="/api/maintenance_portal/report_issue/request/",n=o,i="mutationEntityList";return(0,a.Z)(e,t,"POST",n,i,!0)}function i(e,t){const o="/api/maintenance_portal/issues/",n=o,i="";return(0,a.Z)(e,t,"GET",n,i,!0)}const s={postIssue:n,getIssues:i}},686:(e,t,o)=>{o.r(t),o.d(t,{default:()=>J});var a=o(9835),n=o(6970);const i=e=>((0,a.dD)("data-v-444784c9"),e=e(),(0,a.Cn)(),e),s={class:"row",style:{}},l=i((()=>(0,a._)("h6",null,"Report A Problem",-1))),r={class:"row rowc__what flex-center cus_row",style:{}},c={class:"column",style:{width:"100vw"}},u={class:"col"},m={style:{"margin-left":"4%"},class:"text-black"},d={class:"row rowc__description cus_row"},p={class:"col flex"},g={class:"relative-position row rowc__image"},h={class:"col justify-center items-center",style:{"margin-top":"10px"}},w={class:"relative-position"};function y(e,t,o,i,y,f){const k=(0,a.up)("q-btn"),v=(0,a.up)("q-icon"),b=(0,a.up)("q-input"),_=(0,a.up)("image-carousel2"),C=(0,a.up)("q-page-sticky"),x=(0,a.up)("q-page"),M=(0,a.up)("q-page-container"),q=(0,a.up)("q-layout"),I=(0,a.up)("bottom-menu");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(q,{fullscreen:"",view:"hHh LpR fFf",style:{"font-size":"16px"},class:""},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{class:"relative-position"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{class:"q-px-md text-body2"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(k,{onClick:f.backToIssues,size:"25px",padding:"sm",unelevated:"",round:"",icon:"close"},null,8,["onClick"]),l]),(0,a._)("div",r,[(0,a._)("div",c,[(0,a._)("div",u,[(0,a._)("div",{onClick:t[0]||(t[0]=t=>f.bottomMenu(e.categoryOptions,"reportIssue/categoryOptionMutation")),style:{width:"100%",height:"60px"},class:"flex justify-between content-center border-radius-inherit border"},[(0,a._)("div",m,(0,n.zw)(f.categoryNameSelected),1),(0,a.Wm)(v,{color:"grey-7",name:"arrow_drop_down",size:"sm",style:{"margin-right":"4%"}})])])])]),(0,a._)("div",d,[(0,a._)("div",p,[(0,a.Wm)(b,{outlined:"",modelValue:e.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.description=t),label:"Describe Problem",type:"textarea",style:{height:"100%",width:"100%"},class:"input_description"},null,8,["modelValue"])])]),(0,a._)("div",g,[(0,a.Wm)(k,{class:"image__more absolute-top-right",size:"large",style:{"z-index":"105"},flat:"",round:"",color:"black",icon:"more_horiz",onClick:t[2]||(t[2]=t=>f.bottomMenu(e.imageMenuList,"reportIssue/imageOptionMutation"))}),(0,a._)("div",h,[(0,a._)("div",w,[f.noOfImg?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(k,{key:0,class:"btn-fixed-width absolute-center",align:"left",style:{"z-index":"100"},onClick:f.takePicture,label:"Add Photo",color:"grey",icon:"camera"},null,8,["onClick"])),f.noOfImg?((0,a.wg)(),(0,a.j4)(k,{key:1,class:"absolute-bottom-right glossy",style:{"z-index":"100"},onClick:f.takePicture,round:"",color:"grey",icon:"camera"},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(_,{ref:"carousal",style:{height:"40vh"},images:e.images,slide:e.slide},null,8,["images","slide"])])])]),(0,a.Wm)(C,{position:"bottom-right",style:{"z-index":"200"},offset:[15,30]},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{onClick:f.postIssue,class:"full-width",style:{"font-size":"16px"},color:"primary",label:"Submit",loading:e.submitState},null,8,["onClick","loading"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(I,{onClose:f.closeBottomMenu,mutation:e.mutation,onValue:f.getCategory,menuList:e.category,showBottomMenu:e.ShowBottomMenu},null,8,["onClose","mutation","onValue","menuList","showBottomMenu"])],64)}var f=o(3550);function k(e,t){return new Promise(((o,a)=>{let n,i,s,l,r,c,u=e.split(","),m=u[0].match(/[^:\s*]\w+\/[\w-+\d.]+(?=[;| ])/)[0];console.log(m);const d="image/jpeg";let p=new Image;p.src=e,p.onload=e=>{n=p.width,i=p.height,s=Math.floor(i/n*t),console.log("wh",n,i),l=document.createElement("canvas"),l.width=t,l.height=s,r=l.getContext("2d"),r.drawImage(p,0,0,t,s),c=l.toDataURL(d),o(c)}}))}o(702);function v(e,t,o,n,i,s){const l=(0,a.up)("q-carousel-slide"),r=(0,a.up)("q-carousel");return(0,a.wg)(),(0,a.iD)("div",{class:"q-pa-md",onReportNextSlide:t[3]||(t[3]=(...e)=>s.increasePage&&s.increasePage(...e))},[(0,a.Wm)(r,{animated:"",modelValue:e.indexDum,"onUpdate:modelValue":t[0]||(t[0]=t=>e.indexDum=t),navigation:"",infinite:"",autoplay:e.autoplay,swipeable:"","transition-prev":"slide-right","transition-next":"slide-left",onMouseenter:t[1]||(t[1]=t=>e.autoplay=!1),onMouseleave:t[2]||(t[2]=t=>e.autoplay=!0),height:"100%"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.images,((e,t)=>((0,a.wg)(),(0,a.j4)(l,{key:t,name:t+1,"img-src":e},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue","autoplay"])],32)}const b={name:"imageCarousel2",data:()=>({autoplay:!1,indexDum:0}),props:["images","slide"],methods:{increasePage(){this.indexDum=this.indexDum+1}},created(){}};var _=o(1639),C=o(960),x=o(1694),M=o(9984),q=o.n(M);const I=(0,_.Z)(b,[["render",v]]),P=I;q()(b,"components",{QCarousel:C.Z,QCarouselSlide:x.Z});var S=o(2767),Z=o(1957);const D=e=>((0,a.dD)("data-v-4c18add6"),e=e(),(0,a.Cn)(),e),z={key:0,style:{position:"absolute",bottom:"0",width:"100%","background-color":"white","z-index":"500"},class:"showBottom"},B=D((()=>(0,a._)("div",null,null,-1)));function W(e,t,o,i,s,l){const r=(0,a.up)("q-icon"),c=(0,a.up)("q-card-section"),u=(0,a.up)("q-separator"),m=(0,a.up)("q-card"),d=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",null,[o.showBottomMenu?((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t[0]||(t[0]=t=>{e.$emit("close",!0)}),style:{position:"absolute",bottom:"0","z-index":"499",width:"100%",height:"100vh"},class:"overlay"})):(0,a.kq)("",!0),(0,a.Wm)(Z.W3,{name:"list"},{default:(0,a.w5)((()=>[o.showBottomMenu?((0,a.wg)(),(0,a.iD)("div",z,[(0,a.Wm)(m,{style:{width:"100%",height:"100%","background-color":"white","margin-bottom":"5%"},class:"no-shadow"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.menuList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{onClick:e=>l.clickCardSection(t),class:"row items-center no-wrap"},{default:(0,a.w5)((()=>[e.icon?((0,a.wg)(),(0,a.j4)(r,{key:0,style:{"margin-right":"5px"},size:"sm",name:e.icon},null,8,["name"])):(0,a.kq)("",!0),(0,a._)("div",null,(0,n.zw)(e.name),1)])),_:2},1032,["onClick"])),[[d]]),(0,a.Wm)(u)])))),128)),(0,a.Wm)(c,{class:"row items-center no-wrap"},{default:(0,a.w5)((()=>[B])),_:1})])),_:1})])):(0,a.kq)("",!0)])),_:1})])}const O={name:"bottomMenu",props:["showBottomMenu","menuList","mutation"],data:function(){return{dataShowBottomMenu:!1}},methods:{BottomMenuToggle(e){this.dataShowBottomMenu=!0},clickCardSection(e){console.log("card",e),this.$store.commit(this.mutation,e),this.$emit("value",e),this.$emit("close",!0)}}};var Q=o(4458),T=o(3190),$=o(2857),j=o(926),L=o(1136);const V=(0,_.Z)(O,[["render",W],["__scopeId","data-v-4c18add6"]]),A=V;q()(O,"components",{QCard:Q.Z,QCardSection:T.Z,QIcon:$.Z,QSeparator:j.Z}),q()(O,"directives",{Ripple:L.Z});const R={name:"ReportProblem",components:{BottomMenu:A,ImageCarousel2:P},data:function(){return{mutation:"",images:[],imageUrl:null,brokenItem:"",submittedBefore:!1,description:"",imagePackage:[],submitState:!1,url:"https://placeimg.com/500/300/nature",slide:1,cookies:null,hasCookies:!0,category:"",categoryOptions:[{name:"Plumbing"},{name:"Pool"},{name:"Electrical"},{name:"General Maintenance"},{name:"Internet"},{name:"Appliances"},{name:"Alarm"},{name:"Security"},{name:"Gate"},{name:"Other"}],categorySelected:null,ShowBottomMenu:!1,maximizedToggle:!0,imageMenuList:[{name:"Delete",icon:"delete"},{name:"Add Comment",icon:"comment"},{name:"Add Photo",icon:"photo"}]}},computed:{noOfImg:function(){return!!this.images.length},imageOption:function(){return this.$store.state.reportIssue.imageOption},categoryOption:function(){return this.$store.state.reportIssue.categoryOption},categoryNameSelected:function(){return this.categoryOption?this.categoryOptions[this.categoryOption].name:""}},methods:{bottomMenu(e,t){this.category=e,this.mutation=t,this.ShowBottomMenu=!0},closeBottomMenu(e){this.ShowBottomMenu=!1},getCategory(e){console.log(e),this.categorySelected=e},async takePicture(){const e=await S.V1.getPhoto({quality:90,allowEditing:!0,resultType:S.dk.Uri});var t=e.webPath;k(t,750).then((e=>{vue.imagePackage.push(e)})),vue.images.push(img),vue.$refs.carousal.increasePage()},onFileSelected(e){let t=e.target.files||e.dataTransfer.files,o=new FileReader;o.readAsDataURL(t[0]),o.onloadend=e=>{k(e.target.result,750).then((e=>{this.imagePackage.push(e)})),this.images.push(o.result),this.slide=this.images.length||1}},postIssue(){this.submitState=!0;const e={data:{item:this.brokenItem,description:this.description,property:1,status:1,pictures:this.imagePackage}};f.Z.postIssue(e).then((e=>{console.log(e),this.submitState=!1,this.backToIssues()}))},getDescription(){this.description=this.$refs.description.value},backToIssues(){this.$router.push({path:"/client/issues/"})}}};var E=o(7605),U=o(2133),G=o(9885),F=o(8879),H=o(6611),N=o(4363),Y=o(627);const K=(0,_.Z)(R,[["render",y],["__scopeId","data-v-444784c9"]]),J=K;q()(R,"components",{QLayout:E.Z,QPageContainer:U.Z,QPage:G.Z,QBtn:F.Z,QInput:H.Z,QSelect:N.Z,QIcon:$.Z,QPageSticky:Y.Z})}}]);